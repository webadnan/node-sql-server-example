function start(){require.config({baseUrl:"app",urlArgs:"v="+_UUID_,paths:{app:"app",HomeController:"controllers/home-controller",ModalDialogs:"factories/modal-dialogs",PmsModal:"factories/pms-modal",Rest:"factories/rest",MasterData:"factories/master-data",Global:"factories/global",angularUtil:"util/angular-util",SelectSection:"comp/dialog/select-section/select-section",CommonDialog:"comp/dialog/common-dialog/common-dialog",SelectableList:"comp/selectable-list/selectable-list",lazyLoad:"comp/LazyLoad/lazy-load"},priority:["app"]});var a=["app","Rest","angularUtil","ModalDialogs","PmsModal","SelectSection","CommonDialog","MasterData","Global","SelectableList"];require(a,function(){angular.bootstrap(document,["app"])})}function _und(){for(var a=0;a<arguments.length;a++)if("undefined"!=typeof arguments[a])return arguments[a]}function _templateUrl(a){return a}function assert(a,b){if(!a)throw b||"assertion failed: stack trace: "+(new Error).stack}function WaitFor(a,b,c,d,e,f){function g(){j=0,m||l||(m=!0,d())}function h(a){return k?f*a>=e?g():void(b()?(j=0,l=!0,c()):k&&(j=setTimeout(h,f,a+1))):void 0}function i(){k=!1,j>0&&(clearTimeout(j),j=0),g()}f=_und(f,100),e=_und(e,5e3),d=d||function(){};var j=0,k=!0,l=!1,m=!1;return h(0),a&&(a.$on?a.$on("$destroy",i):a.on("$destroy",i)),{stop:i}}define([],function(){var a=angular.module("app",["ngRoute","ui.bootstrap"]);a.config(["$routeProvider","$controllerProvider","$compileProvider","$filterProvider","$provide",function(b,c,d,e,f){function g(a){if(void 0===a.require)return a;var b=a.require;return a.resolve={load:["$q",function(a){var c=a.defer();return require(b,function(){c.resolve("success")}),c.promise}]},a}a.lazy={controller:c.register,directive:d.directive,filter:e.register,factory:f.factory,service:f.service},b.when("/",g({controller:"HomeController",templateUrl:"app/controllers/home-controller.html",require:["HomeController"]})).when("/lazy",g({controller:"HomeController",templateUrl:"app/views/lazy-load-test.html",reloadOnSearch:!1,require:["HomeController","lazyLoad"]})).otherwise({redirectTo:"/"})}]);var b={controller:function(){(a.lazy||a).controller.apply(null,arguments)},directive:function(){(a.lazy||a).directive.apply(null,arguments)},service:function(){(a.lazy||a).service.apply(null,arguments)},factory:function(){(a.lazy||a).factory.apply(null,arguments)},filter:function(){(a.lazy||a).filter.apply(null,arguments)},config:function(){(a.lazy||a).config.apply(null,arguments)}};return b}),define(["app","ModalDialogs"],function(a){a.controller("HomeController",["$scope","ModalDialogs","Rest","SelectSection","MasterData",function(a,b,c,d,e){console.log("HomeController"),a.name="Adnan",a.showModal=function(){b.example("lg","YourName").result.then(function(){console.log("callback-1",arguments)},function(){console.log("callback-2",arguments)})},a.onAlert=function(){b.alert("Hello, World!").then(function(){console.log("alert done")})},a.onConfirm=function(){b.confirm("Do you want to delete this?").then(function(){console.log("confirm done with success")},function(){console.log("confirm done with failure")})},a.onPrompt=function(){b.prompt({msg:"Enter the user name",placeholder:"Name"}).then(function(a){console.log("confirm done with ",a)},function(){console.log("confirm done with failure")})},a.onMultiInput=function(){b.multiInput([{key:"name",label:"Name",type:b.TYPE_TEXT,defaultText:"hello, world!",placeholder:"Ex. Alibaba"},{key:"salary",label:"Salary",type:b.TYPE_INT,defaultText:"10000"}]).then(function(a){console.log(a)},function(){console.log("failure")})},a.onAddress=function(){b.multiInput([{key:"name",label:"Name",type:b.TYPE_TEXT,defaultText:"Your Name",placeholder:"Ex. Alibaba"},{key:"fathersname",label:"Father's Name",type:b.TYPE_INT,defaultText:"father name"},{key:"paddress",label:"Permanent Address",type:b.TYPE_TEXT,defaultText:"Permanent address"},{key:"mobileno",label:"Mobile No",type:b.TYPE_TEXT,defaultText:"+880"},{key:"nid",label:"NID",type:b.TYPE_TEXT,defaultText:"Your National ID No"}]).then(function(a){console.log(a)},function(){console.log("failure")})},a.onEsc=function(){console.log("esc")},a.loadData=function(){e.getSections().then(function(a){console.log(a)})},a.selectSection=function(){d.show()}}])}),define(["app"],function(a){a.factory("Global",["$q",function(a){function b(b){var c=a.defer();return c.resolve(b),c.promise}return{resolve:b}}])}),define(["app"],function(a){a.factory("MasterData",["Global","Rest","$q",function(a,b,c){function d(){return e?a.resolve(e):b.batch({api:"codefile.sections"}).then(function(a){return e=a})}var e=null;return{getSections:d}}])}),define(["app","PmsModal"],function(a){a.service("ModalDialogs",["PmsModal","$q",function(a,b){return{TYPE_TEXT:"type-text",TYPE_INT:"type-int",TYPE_NUMBER:"type-number",TYPE_COMBO:"type-combo",TYPE_DATE:"type-date",example:function(b,c){return a.open({templateUrl:"myModalContent.html",size:b,resolve:{anotherParam:function(){return"this can be any value"+c}},controller:function(a,b,c){a.cancel=function(){b.dismiss("cancel")},a.ok=function(){b.close("alibaba")}}})},alert:function(c){var d=b.defer(),e=['<div class="modal-body" ng-enter="ok()">${msg}</div>','<div class="modal-footer">','<button class="btn btn-default" ng-click="ok()">OK</button>',"</div>"],f=_.template(e.join(""),{msg:c});return a.open({template:f,size:"sm",backdrop:"static",controller:function(a,b){a.ok=function(){b.dismiss("cancel"),d.resolve("ok")}}}).result.then(function(){},function(){d.resolve("ok")}),d.promise},confirm:function(c,d){var e=b.defer(),f=_und(d,"Yes_No").split("_"),g=['<div class="modal-body" ng-enter="ok()">{{options.msg}}</div>','<div class="modal-footer">','  <button class="btn btn-primary" ng-click="ok()">${ok}</button>','  <button class="btn btn-default" ng-click="cancel()">${cancel}</button>',"</div>"],h=_.template(g.join(""),{ok:f[0],cancel:f[1]});return a.open({template:h,size:"sm",backdrop:"static",controller:function(a,b){a.options={msg:c},a.ok=function(){b.dismiss("ok"),e.resolve("ok")},a.cancel=function(){b.dismiss("cancel"),e.reject("cancel")}}}).result.then(function(){},function(){e.reject("cancel")}),e.promise},prompt:function(c){var d=b.defer();c=angular.extend({msg:"Enter your value",defaultText:"",buttonTexts:"OK_Cancel",placeholder:""},c);var e=c.buttonTexts.split("_"),f=['<div class="modal-body">',"  <p>{{options.msg}}</p>",'  <input type="text" class="form-control dialog-prompt-text" placeholder="{{options.placeholder}}" ng-model="options.defaultText" ng-enter="ok()" />',"</div>",'<div class="modal-footer">','  <button class="btn btn-primary" ng-click="ok()">${ok}</button>','  <button class="btn btn-default" ng-click="cancel()">${cancel}</button>',"</div>","{{focus()}}"],g=_.template(f.join(""),{ok:e[0],cancel:e[1]});return a.open({template:g,size:"sm",backdrop:"static",controller:function(a,b){a.options=c,a.ok=function(){b.dismiss("ok"),d.resolve(a.options.defaultText)},a.cancel=function(){b.dismiss("cancel"),d.reject("cancel")},a.focus=function(){console.log("focusing"),$(".modal-body input").focus()}}}).result.then(function(){},function(){d.reject("cancel")}),d.promise},multiInput:function(c,d){var e=this,f=b.defer();c=c.map(function(a,b){return a=angular.extend({key:"empty-key",type:e.TYPE_TEXT,defaultText:"",placeholder:""},a),a.label=a.label||a.key,a}),d=angular.extend({msg:"Enter your values",buttonTexts:"OK_Cancel",size:""},d);for(var g=d.buttonTexts.split("_"),h=['<div class="modal-title">{{options.msg}}</div>','<div class="modal-body">',"  ${inputHtml}","</div>",'<div class="modal-footer">','  <button class="btn btn-primary" ng-click="ok()">${ok}</button>','  <button class="btn btn-default" ng-click="cancel()">${cancel}</button>',"</div> {{focus()}}"],i=[],j=0;j<c.length;j++){var k=c[j],l=['<div class="form-group">','  <label for="${key}" class="col-sm-2 control-label">${label}</label>','  <div class="col-sm-10">','    <input id="${key}" type="email" class="form-control" placeholder="${placeholder}" value="${defaultText}">',"  </div>","</div>"];i.push(_.template(l.join(""),k))}i.splice(0,0,'<form class="form-horizontal">'),i.push("</form>");var m=_.template(h.join(""),{inputHtml:i.join(""),ok:g[0],cancel:g[1]});return a.open({template:m,size:d.size,backdrop:"static",controller:function(a,b){a.focused=!1,a.options=d,a.ok=function(){b.dismiss("ok"),f.resolve("success")},a.cancel=function(){b.dismiss("cancel"),f.reject("cancel")},a.focus=function(){if(!a.focused){var b="#"+c[0].key+":eq(0)";0!==$(b).length&&(a.focused=!0,setTimeout(function(){$(b).focus()},0))}}}}).result.then(function(){},function(){f.reject("cancel")}),f.promise}}}])}),define(["app"],function(a){a.service("PmsModal",["$modal","$q",function(a,b){return{open:function(c){c.backdrop=c.backdrop||"static";var d=a.open(c);return d.opened.then(function(){setTimeout(function(){var a=($(window).height()-$(".modal-dialog").height())/2;$(".modal-dialog").css("margin-top",a)},0)}),d.result.then(function(a){return $(".modal-backdrop").remove(),a},function(){return $(".modal-backdrop").remove(),b.reject.apply(this,arguments)}),d}}}])}),define(["app"],function(a){a.factory("Rest",["$http","$q",function(a,b){function c(b){return a(b).then(d,e)}function d(a){return a}function e(a){return console.log(a),b.reject(a)}function f(a){var b=a instanceof Array;return b||(a=[a]),c({method:"post",url:document.location.origin+"/api/batch",data:a}).then(function(a){return b?a.data:a.data[0]})}return{batch:f}}])}),define(["app"],function(a){[["ngEsc",27],["ngEnter",13]].forEach(function(b){(function(b,c){a.directive(b,["$document",function(a){return function(d,e,f){function g(a){("INPUT"!==e.prop("tagName").toUpperCase()||e.is(":focus"))&&h.is(":visible")&&a.keyCode===c&&(d.$event=a,d.$apply(f[b]))}var h=e;a.on("keydown",g),e.on("$destroy",function(){a.off("keydown",g)})}}])}).apply(this,b)})});var __={};__.getMethodName=function(a){return a?a.match(/[^(]+/)[0]:void 0},__.getMethodParams=function(a){try{return a.match(/\((.*)\)/)[1].split(",").map(function(a){return a.trim()})}catch(b){}return[""]},__.find=function(a,b){var c=__.where(a,b);return c.length>0?c[0]:void 0},__.where=function(a,b){for(var c=[],d=a.length,e=0;d>e;e++)__.isSubset(a[e],b)&&c.push(a[e]);return c},__.isSubset=function(a,b){var c=[];for(c.push([a,b]);c.length>0;){var d=c.shift();a=d[0],b=d[1];for(var e in b){var f=a[e],g=b[e],h=__["typeof"](f),i=__["typeof"](g);if(h!==i)return!1;if("string"===i||"number"===i||"boolean"===i){if(f!==g)return!1}else if("array"===i){for(var j=g.length-1;j>=0;j--)if(-1===f.indexOf(g[j]))return!1}else c.push([f,g])}}return!0},__["typeof"]=function(a){return a instanceof Array?"array":typeof a},__.shuffle=function(a){for(var b,c,d=a.length;d;b=Math.floor(Math.random()*d),c=a[--d],a[d]=a[b],a[b]=c);return a};var DialogManager={dialogs:[],addDialog:function(a,b){var c=this;b=b||$(".dialog-container-100"),c.dialogs.push({element:a,container:b}),b.append(a).css("display","flex"),$(".black-overlay").show(),$("body").css("overflow-y","hidden")},removeDialog:function(){var a=this;if(0!==a.dialogs.length){var b=a.dialogs.pop();console.log("removing dialog",b.element,b.container),b.element.remove(),0===a.dialogs.length&&(b.container.css("display","none"),$(".black-overlay").hide(),$("body").css("overflow-y","auto"))}},removeAllDialogs:function(){for(var a=this;a.dialogs.length>0;)a.removeDialog();$(".black-overlay").hide(),$("body").css("overflow-y","auto"),$(".dialog-container-100").css("display","none")}};define(["app"],function(a){a.directive("lazyLoad",function(){return{restrict:"EA",scope:{},template:"lazy load blah blah",link:function(a,b,c){console.log("lazy load")}}})}),define(["app"],function(a){a.directive("selectableList",["$filter",function(a){return{restrict:"EA",templateUrl:_templateUrl("app/comp/selectable-list/selectable-list.html"),scope:{data:"=",header:"=",filter:"=",filteredData:"&"},link:function(b,c,d){function e(){for(var a=0;a<f.length;a++){var b=f[a];if(!b._selected)return!1}return!0}b.allSelected=!1;var f=b.data;b.getData=function(){return f=a("filter")(b.data,b.filter||""),d.filteredData&&b.filteredData({data:f}),f},b.selectAll=function(a){b.allSelected=a;for(var c=0;c<f.length;c++){var d=f[c];d._selected=a}console.log(b.allSelected)},b.toggle=function(a){var c=f[a]._selected;f[a]._selected=c?!1:!0,b.allSelected=e()},b.getDataClass=function(a){return f[a]._selected?"data selected":"data"}}}}])}),define(["app"],function(a){a.directive("commonDialog",function(){return{restrict:"EA",transclude:!0,scope:{close:"&",title:"@"},templateUrl:_templateUrl("app/comp/dialog/common-dialog/common-dialog.html"),link:function(a,b,c){c.close||b.find(".cross-button").remove(),b.find("header").length>0?b.find(".modal-title").empty().append(b.find("header")):c.title||b.find(".modal-title").remove(),b.find(".modal-title").length>0&&b.find(".content").css("padding-top","0"),b.find("footer").length>0?b.find(".modal-footer").append(b.find("footer")):b.find(".modal-footer").remove(),console.log(c)}}})}),define(["app","CommonDialog","SelectableList"],function(a){a.factory("SelectSection",["$rootScope","$compile","$q",function(a,b,c){return{defer:null,show:function(d){var e=this;e.defer=c.defer(),d=d||a,console.log("SelectSection.show()");var f=b("<select-section></select-section>")(d);return DialogManager.addDialog(f),e.defer.promise}}}]),a.directive("selectSection",["MasterData","SelectSection",function(a,b){return{restrict:"EA",templateUrl:_templateUrl("app/comp/dialog/select-section/select-section.html"),link:function(c,d,e){function f(){a.getSections().then(function(a){g.sections=a,console.log(c.data.sections)}),WaitFor(d,function(){return d.find(".input-text").length},function(){d.find(".input-text").focus()})}console.log("inside select-section");var g=c.data={},h="Select Section";g.title=h,g.sections=[],g.header=[{key:"cd",value:"cd"},{key:"name",value:"Name"}],g.filter="",g.okButtonClass="btn btn-primary disabled",c.close=function(){console.log("inside select section close"),DialogManager.removeDialog(),b.defer.reject(null)},c.ok=function(){console.log("ok")},c.onEnter=function(){if(1===d.find("[id^=row-]").length){var a=d.find("[id^=row-]").attr("id").split("-")[1],b=g.sections[+a];console.log(b)}},c.onFilter=function(a){g.okButtonClass="btn btn-primary disabled",g.title=h;try{if(1===a.length)return void(g.okButtonClass="btn btn-primary");var b=__.where(a,{_selected:!0});b.length>0&&(g.okButtonClass="btn btn-primary",g.title=h+" ("+b.length+")")}catch(c){}},f()}}}])});